import{d as H,C as T,q as R,E as W,D as X,r as c,g as E,H as Y,l as B,w as f,a as m,o as M,e,t as _,m as z,I as A,b as i,y as x,G as O,c as K,L as le,k as Q,J as S,F as te,p as ae}from"./index-DzAVNVwd.js";import{u as q,_ as oe,g as G}from"./container-mGPX5aYz.js";import{s as se}from"./states-CUn2dcwd.js";const ne={class:"p-4"},ie={class:"text-xl md:text-3xl font-bold"},re={class:"w-full m-0 mt-5"},de={class:"field text-base md:text-lg"},ue={for:"name"},ce={class:"grid"},me={class:"col field"},pe={for:"barcode"},ve={class:"field col"},fe={for:"sku"},be={class:"grid"},ge={class:"col field text-base md:text-lg"},_e={for:"name"},ye={class:"text-2xl font-semibold"},$e={class:"col-12 mt-5"},he={class:"flex justify-content-end gap-4"},we=H({__name:"CreateView",props:T({data:{}},{modelValue:{},modelModifiers:{}}),emits:T(["close","submitted"],["update:modelValue"]),setup(V,{emit:$}){const w=$,u=q(),{t:o}=R(),C=W(),P=X(V,"modelValue"),y=V,v=c(""),d=c(""),r=c(""),b=c(0),p=c(""),h=c(""),k=E(()=>({id:0,barcode:v.value,images:d.value,name:r.value,parent:b.value,sku:p.value,state:h.value})),L=E(()=>j.value?o("labels.editContainer"):o("labels.newContainer")),j=E(()=>!!y.data);Y(async()=>{y.data&&t(y.data)});function N(){v.value="",d.value="",r.value="",b.value=0,p.value="",h.value=""}function D(){w("close"),N()}function t(a){v.value=a.barcode,d.value=a.images,r.value=a.name,b.value=a.parent,p.value=a.sku,h.value=a.state}async function l(){u.setLoading(!0);try{let a="",n=null;y.data?(n=await u.update({id:y.data.id,data:k.value}),a=o("app.features.container.create.editSuccessMessage")):(n=await u.create(k.value),a=o("app.features.container.create.successMessage")),n?(C.add({severity:"success",summary:"Info",detail:a,life:3e3}),w("submitted",n),D()):alert("Nous n'avons pas pu éditer la ressource, veuillez réessayer")}catch(a){console.log(G(a)),C.add({severity:"error",summary:o("labels.error"),detail:a,life:3e3})}finally{u.setLoading(!1)}}return(a,n)=>{const U=m("PrimeDropdown"),I=m("PrimeButton"),F=m("PrimeDialog");return M(),B(F,{breakpoints:{"1199px":"75vw","575px":"90vw"},closable:!1,modal:"",style:{width:"50vw"},visible:P.value,"onUpdate:visible":n[4]||(n[4]=g=>P.value=g)},{container:f(()=>[e("div",ne,[e("div",null,[e("span",ie,_(L.value),1)]),e("form",re,[e("div",de,[e("label",ue,_(a.$t("labels.name")),1),z(e("input",{"onUpdate:modelValue":n[0]||(n[0]=g=>r.value=g),id:"name",type:"text",class:"text-color text-sm md:text-lg surface-overlay p-3 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,512),[[A,r.value]])]),e("div",ce,[e("div",me,[e("label",pe,_(a.$t("labels.barcode")),1),z(e("input",{"onUpdate:modelValue":n[1]||(n[1]=g=>v.value=g),id:"barcode",type:"text",class:"text-color text-sm md:text-lg surface-overlay p-3 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,512),[[A,v.value]])]),e("div",ve,[e("label",fe,_(a.$t("labels.sku")),1),z(e("input",{"onUpdate:modelValue":n[2]||(n[2]=g=>p.value=g),id:"sku",type:"text",class:"text-color text-sm md:text-lg surface-overlay p-3 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,512),[[A,p.value]])])]),e("div",be,[e("div",ge,[e("label",_e,_(a.$t("labels.state")),1),i(U,{modelValue:h.value,"onUpdate:modelValue":n[3]||(n[3]=g=>h.value=g),options:x(se),placeholder:a.$t("placeholders.selectState"),class:"w-full py-1"},null,8,["modelValue","options","placeholder"])])]),e("div",null,[e("span",ye,_(a.$t("app.features.container.create.containerImage")),1),i(oe)]),e("div",$e,[e("div",he,[i(I,{onClick:D,size:"large",severity:"secondary",label:a.$t("actions.cancel")},null,8,["label"]),i(I,{onClick:l,size:"large",label:a.$t("actions.save"),loading:x(u).loading},null,8,["label","loading"])])])])])]),_:1},8,["visible"])}}}),Pe={class:"p-4"},ke={class:"mb-4"},xe={class:"text-xl md:text-3xl font-bold"},Ve={class:"col-12 mt-5"},Ce={class:"flex justify-content-end gap-4"},De=H({__name:"DeleteView",props:T({id:{}},{modelValue:{},modelModifiers:{}}),emits:T(["close","submitted"],["update:modelValue"]),setup(V,{emit:$}){const w=$,u=X(V,"modelValue"),o=q(),C=V,{t:P}=R(),y=W();async function v(){o.setLoading(!0);try{await o.destroy(C.id)?(y.add({severity:"success",summary:"Info",detail:P("app.features.container.deleteSuccessMessage"),life:3e3}),w("close"),w("submitted")):alert("Nous n'avons pas pu supprimer la ressource, veuillez réessayer")}catch(d){console.log(G(d)),y.add({severity:"error",summary:P("labels.error"),detail:d,life:3e3})}finally{o.setLoading(!1)}}return(d,r)=>{const b=m("PrimeMessage"),p=m("PrimeButton"),h=m("PrimeDialog");return M(),B(h,{visible:u.value,"onUpdate:visible":r[1]||(r[1]=k=>u.value=k),modal:"",class:"w-25rem"},{container:f(()=>[e("div",Pe,[e("div",ke,[e("span",xe,_(x(P)("app.features.container.deleteContainer")),1)]),i(b,{severity:"error"},{default:f(()=>[O(_(d.$t("app.features.container.confirmDeleteMessage")),1)]),_:1}),e("div",Ve,[e("div",Ce,[i(p,{onClick:r[0]||(r[0]=k=>w("close")),size:"large",severity:"secondary",label:d.$t("actions.cancel")},null,8,["label"]),i(p,{onClick:v,label:d.$t("labels.delete"),loading:x(o).loading,size:"large",severity:"danger"},null,8,["label","loading"])])])])]),_:1},8,["visible"])}}}),Me={class:"pb-6 md:pb-3"},Ie={class:"flex justify-content-center"},Se={class:"font-medium text-xl md:text-4xl"},Te={class:"mt-4"},Be={class:"card shadow-1"},Le={class:"flex justify-content-end"},je=e("i",{class:"pi pi-search"},null,-1),Ne={class:"flex"},ze=H({__name:"IndexView",setup(V){const{t:$}=R(),w=W(),u=q();let o=c([]);const C=c({icon:"pi pi-home"}),P=c([{label:$("labels.container",2)}]),y=[{field:"name",header:$("labels.name")},{field:"barcode",header:$("labels.barcode")},{field:"sku",header:$("labels.sku")}],v=c({global:{value:null,matchMode:S.CONTAINS},name:{value:null,matchMode:S.CONTAINS},barcode:{value:null,matchMode:S.STARTS_WITH},sku:{value:null,matchMode:S.STARTS_WITH}}),d=c(!1),r=c(null),b=c(!1),p=c(0);Y(async()=>{u.setLoading(!0);try{o.value=await u.getAll({itemsPerPage:-1,sortBy:["containers.name"]})}catch(t){console.log(G(t)),w.add({severity:"error",summary:$("labels.error"),detail:t,life:3e3})}finally{u.setLoading(!1)}});function h(){r.value=null}function k(t){if(r.value&&t)for(let l=0;l<o.value.length;l++)r.value.id==o.value[l].id&&o.value.splice(l,1,t);else!r.value&&t&&o.value.unshift(t);if(p.value>0&&!t)for(let l=0;l<o.value.length;l++)p.value==o.value[l].id&&o.value.splice(l,1);N()}function L(t){p.value=t,b.value=!0}function j(t){r.value=t,D(!0)}function N(){o.value.sort((t,l)=>t.name>l.name?1:l.name>t.name?-1:0)}function D(t){d.value=t,t==!1&&h()}return(t,l)=>{const a=m("PrimeBreadcrumb"),n=m("PrimeButton"),U=m("PrimeToolbar"),I=m("PrimeInputIcon"),F=m("PrimeInputText"),g=m("PrimeIconField"),J=m("PrimeColumn"),Z=m("PrimeDataTable");return M(),K("div",Me,[e("nav",null,[e("div",Ie,[i(a,{home:C.value,model:P.value,class:"w-full bg-transparent"},null,8,["home","model"])]),i(U,{class:"bg-transparent mt-1 border-none"},{start:f(()=>[e("span",Se,_(t.$t("labels.containerList")),1)]),end:f(()=>[i(n,{onClick:l[0]||(l[0]=s=>D(!0)),label:t.$t("labels.newContainer")},null,8,["label"])]),_:1})]),e("div",Te,[e("div",Be,[i(Z,{filters:v.value,"onUpdate:filters":l[2]||(l[2]=s=>v.value=s),value:x(o),loading:x(u).loading,stripedRows:"",sortMode:"multiple",filterDisplay:"row",globalFilterFields:["name","sku","barcode"],paginator:"",removableSort:"",rows:10,rowsPerPageOptions:[5,10,20,50],tableStyle:"min-width: 50rem"},le({header:f(()=>[e("div",Le,[i(g,{iconPosition:"left"},{default:f(()=>[i(I,null,{default:f(()=>[je]),_:1}),i(F,{modelValue:v.value.global.value,"onUpdate:modelValue":l[1]||(l[1]=s=>v.value.global.value=s),placeholder:t.$t("labels.search"),class:"py-3"},null,8,["modelValue","placeholder"])]),_:1})])]),loading:f(()=>[O(_(t.$t("labels.loadingMessage")),1)]),default:f(()=>[(M(),K(te,null,ae(y,s=>i(J,{key:s.field,field:s.field,header:s.header,sortable:""},null,8,["field","header"])),64)),i(J,{key:"actions",field:"actions",header:t.$t("labels.action")},{body:f(({data:s})=>[e("div",Ne,[i(n,{onClick:ee=>j(s),class:"mr-2",icon:"pi pi-pencil",rounded:"",outlined:"","aria-label":t.$t("labels.edit")},null,8,["onClick","aria-label"]),i(n,{onClick:ee=>L(s.id),icon:"pi pi-trash",severity:"danger",rounded:"",outlined:"","aria-label":t.$t("labels.delete")},null,8,["onClick","aria-label"])])]),_:1},8,["header"])]),_:2},[x(u).loading?void 0:{name:"empty",fn:f(()=>[O(_(t.$t("app.features.container.index.emptyMessage")),1)]),key:"0"}]),1032,["filters","value","loading"])])]),d.value?(M(),B(we,{key:0,modelValue:d.value,"onUpdate:modelValue":l[3]||(l[3]=s=>d.value=s),data:r.value,onClose:l[4]||(l[4]=s=>D(!1)),onSubmitted:l[5]||(l[5]=s=>{k(s)})},null,8,["modelValue","data"])):Q("",!0),b.value?(M(),B(De,{key:1,modelValue:b.value,"onUpdate:modelValue":l[6]||(l[6]=s=>b.value=s),onClose:l[7]||(l[7]=s=>b.value=!1),id:p.value,onSubmitted:l[8]||(l[8]=s=>k())},null,8,["modelValue","id"])):Q("",!0)])}}});export{ze as default};
