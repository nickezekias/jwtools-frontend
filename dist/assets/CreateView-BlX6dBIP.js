import{d as U,u as I,y as A,G as F,r as l,i as k,I as L,c as M,e,b as a,w as z,t as r,s as y,J as h,f as w,a as u,o as E}from"./index-XfqRP4FD.js";import{a as N,u as q,F as G,g as J}from"./container-DFXxO-jC.js";import{p as O}from"./productTypes-B5NR5mDa.js";const R={class:"pb-6 md:pb-3"},H={class:"flex justify-content-center"},K={class:"font-medium text-xl md:text-4xl"},Q={class:"mt-4"},W={class:"card"},X={class:"grid"},Y={class:"col-12 text-lg md:text-2xl font-regular mb-3"},Z={class:"col-12 md:col-5"},ee={class:"col-12 md:col-7"},oe={class:"field text-base md:text-lg"},te={for:"name"},se={class:"formgrid grid"},le={class:"field col-12 md:col"},ae={for:"sku"},re={class:"field col-12 md:col"},ne={for:"barcode"},de={class:"formgrid grid"},ie={class:"col-12 md:col-7 field text-base md:text-lg"},ce={for:"name"},ue={class:"col-12 md:col-5 field text-base md:text-lg"},pe={for:"type"},me={class:"col-12 mt-5"},be={class:"flex justify-content-end gap-4"},ye=U({__name:"CreateView",setup(fe){const p=N(),n=q(),x=I(),{t:d}=A(),$=F(),C=l({icon:"pi pi-home"}),B=l([{label:d("labels.product",2)},{label:d("labels.newProduct")}]),m=l(""),b=l(),f=l([]),i=l(),v=l(),_=l(),g=l(""),T=k(()=>({id:0,productAttributes:[],barcode:m.value,container:b.value,images:g.value,locale:"",name:i.value,parent:0,quantity:1,sku:v.value,slug:i.value.toLowerCase().replace(" ","-"),state:"",status:"",tags:[],type:_.value,warehouse:""})),D=k(()=>{const o=new FormData;for(let[t,c]of Object.entries(T.value))t=="productAttributes"||t=="tags"?o.append(`${t}`,c.toString()):o.append(`${t}`,`${c}`);return o.append("file",g.value),o});L(async()=>{p.objects.length>0?f.value=p.objects:f.value=await p.getAll({itemsPerPage:-1,sortBy:["containers.name"]})});async function S(){n.setLoading(!0);try{const o=await n.create(D.value);o&&($.add({severity:"success",summary:"Info",detail:d("app.features.product.create.successMessage"),life:3e3}),x.push(`/products?editId=${o.id}&new=1`),window.setTimeout(()=>{},3e3))}catch(o){$.add({severity:"error",summary:d("labels.error"),detail:J(o),life:1e4})}finally{n.setLoading(!1)}}return(o,t)=>{const c=u("PrimeBreadcrumb"),j=u("PrimeToolbar"),P=u("PrimeDropdown"),V=u("PrimeButton");return E(),M("div",R,[e("nav",null,[e("div",H,[a(c,{home:C.value,model:B.value,class:"w-full bg-transparent"},null,8,["home","model"])]),a(j,{class:"bg-transparent mt-1 border-none"},{start:z(()=>[e("span",K,r(o.$t("labels.newProduct")),1)]),_:1})]),e("div",Q,[e("form",W,[e("section",X,[e("div",Y,r(o.$t("app.features.product.create.productInformation")),1),e("div",Z,[a(G,{onFileSelected:t[0]||(t[0]=s=>{g.value=s})})]),e("div",ee,[e("div",oe,[e("label",te,r(o.$t("labels.name")),1),y(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>i.value=s),id:"name",type:"text",class:"text-color text-sm md:text-lg surface-overlay p-3 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,512),[[h,i.value]])]),e("div",se,[e("div",le,[e("label",ae,r(o.$t("labels.sku")),1),y(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>v.value=s),id:"sku",type:"text",class:"text-color text-sm md:text-lg surface-overlay p-3 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,512),[[h,v.value]])]),e("div",re,[e("label",ne,r(o.$t("labels.barcode")),1),y(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>m.value=s),id:"barcode",type:"text",class:"text-color text-sm md:text-lg surface-overlay p-3 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,512),[[h,m.value]])])]),e("div",de,[e("div",ie,[e("label",ce,r(o.$t("labels.container")),1),a(P,{modelValue:b.value,"onUpdate:modelValue":t[4]||(t[4]=s=>b.value=s),optionLabel:"name",optionValue:"sku",options:f.value,placeholder:o.$t("placeholders.selectContainer"),class:"w-full py-1"},null,8,["modelValue","options","placeholder"])]),e("div",ue,[e("label",pe,r(o.$t("labels.productType")),1),a(P,{modelValue:_.value,"onUpdate:modelValue":t[5]||(t[5]=s=>_.value=s),options:w(O),placeholder:o.$t("placeholders.selectProductType"),class:"w-full py-1"},null,8,["modelValue","options","placeholder"])])])]),e("div",me,[e("div",be,[a(V,{onClick:t[6]||(t[6]=s=>w(x).push({name:"products.index"})),size:"large",severity:"secondary",label:o.$t("actions.cancel")},null,8,["label"]),a(V,{onClick:S,size:"large",label:o.$t("actions.save"),loading:w(n).loading},null,8,["label","loading"])])])])])])])}}});export{ye as default};
